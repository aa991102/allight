<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"HTTP://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
	<!-- 로그인 처리 -->
	<select id="login" resultType="java.util.HashMap" parameterType="java.util.HashMap">
	select * from member where mid=#{mid} and mpw=#{mpw}
	</select>
	
	<!-- 카카오 아이디 확인 -->
	<select id="kakao" resultType="java.util.HashMap" parameterType="memDTO">
	select * from member where mid=#{mid}
	</select>
	
	<insert id="kinsert" parameterType="memDTO">
	insert into member(mno,mid) values(mno_seq.nextval,#{mid})
	</insert>
	
	<!-- 회원 수 조회 -->
	<select id="totalCnt" resultType="Integer">
		select  count(*) from member
	</select>
	
	<!-- 회원 리스트 출력 -->
	<select id="list" resultType="java.util.HashMap" parameterType="PageUtil">
	select * from member where mno between #{startNo} and #{endNo} order by mno desc
	</select>
	
	<!-- 회원 검색 -->
	<select id="searchList" resultType="java.util.HashMap" parameterType="PageUtil">
	select * from (select * from member where mid like '%${searchWord}%') 
		where mno between #{startNo} and #{endNo} order by mno desc
	</select>
	
	<!-- 회원 정보 출력 -->
	<select id="memInfo" resultType="memDTO" parameterType="memDTO">
	select * from member where mno = #{mno}
	</select>
	
	<!-- 최근 접속일 갱신 -->
	<update id="logDate" parameterType="java.util.HashMap">
		UPDATE member SET mlogdate=sysdate where mno=#{mno}
	</update>
</mapper>
	
